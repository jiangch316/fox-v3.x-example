import{ref as e,shallowRef as t,getCurrentInstance as r,inject as n,onUnmounted as s,defineComponent as i,provide as o,h as l}from"vue";const a=Array.isArray,u=e=>"[object Map]"===v(e),h=e=>"[object Set]"===v(e),c=e=>e instanceof Date,f=e=>"function"==typeof e,p=e=>"string"==typeof e,d=e=>"symbol"==typeof e,y=e=>null!==e&&"object"==typeof e,m=e=>y(e)&&f(e.then)&&f(e.catch),g=Object.prototype.toString,v=e=>g.call(e),w=e=>"[object Object]"===v(e),b="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function x(e){return e.__esModule||b&&"Module"===e[Symbol.toStringTag]}const S="undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]");function R(...e){var t;let r=void 0!==e[0]&&null!==e[0]?e[0]:{},n=1,s=e.length,i=!1;for("boolean"==typeof r&&(i=r,r=null!=(t=e[n])?t:{},n++),"object"!=typeof r&&(r={});n<s;n++)if(null!==e[n]&&void 0!==e[n]){let t=e[n];for(let e in t){let n=r[e],s=t[e];if(n!==s)if(!0===i&&s&&"object"==typeof s){let t;t=Array.isArray(s)?n&&Array.isArray(n)?n:[]:n&&"object"==typeof n?n:{},r[e]=R(i,t,s)}else void 0!==s&&(r[e]=s)}}return r}function A(e,t,r=!1){if(r){if("object"!=typeof t)return{};"object"!=typeof e&&(e={});for(let n in t){let s=e[n],i=t[n];s!==i&&("function"==typeof i||i instanceof Date||i instanceof RegExp||("object"==typeof i?(s=A(s,i,r),e[n]=s):e[n]=i))}const n=Object.getOwnPropertySymbols(t);for(let s of n){let n=e[s],i=t[s];n!==i&&(("object"!=typeof i||w(i))&&("object"==typeof i?(n=A(n,i,r),e[s]=n):e[s]=i))}}else R(!0,e,t);return e}const C=class{static get(){let e=++C.seed;return e>=Number.MAX_VALUE&&(C.seed=0),e}};let E=C;E.seed=(new Date).getTime();const P=S?Promise.resolve():null;function T(e,...t){null!==P?t&&t.length>0?P.then((()=>{e(t)})):P.then(e):t&&t.length>0?setTimeout((()=>{e(t)})):setTimeout(e)}function O(e){return null!=e&&("boolean"==typeof e?e:"string"==typeof e?"true"===e.toLocaleLowerCase():Boolean(e))}var j,$,F;const q=Symbol("idKey"),_=Symbol("valueKey"),k=Symbol("childrenKey"),K=Symbol("growKey");class N{constructor(t){this[j]=!0,this[$]=e(),this[F]=new Map,this[q]=t}}j=K,$=_,F=k;class D{get(e,t){if("value"==t)return e[_].value;if("grow"===t)return e[K];let r=e[k].get(t);return r?H(r):e[K]?(r=M(t),r[K]=e[K],e[k].set(t,r),H(r)):void 0}set(e,t,r){return"value"==t?(e[_].value=r,!0):"grow"===t?(e[K]=O(r),!0):null==r?(e[k].delete(t),!0):(console.error(`illegal property:${t}`),!1)}deleteProperty(e,t){return"value"===t||"grow"==t?(console.error(`can not delete property:${String(t)}`),!1):(e[k].delete(t),!0)}}function M(e){let t=new N(e);return Reflect.set(t,"__proxy__",new Proxy(t,new D)),t}function H(e){return Reflect.get(e,"__proxy__")}class L extends N{constructor(){super("__root__")}put(...e){let t=e.length;if(t<2)return console.error("参数至少包括一个(key, value)"),!1;let r=this;for(let n=0;n<t-1;n++){let t,s=e[n];r[k].has(s)?t=r[k].get(s):(t=M(s),r[k].set(s,t)),r=t}return r[_].value=e[t-1],!0}get(...e){let t=e.length;if(0===t)return;let r=this;for(let n=0;n<t;n++){let t=e[n];if(!r[k].has(t))return;r=r[k].get(t)}return r[_].value}remove(...e){let t=e.length;if(0==t)return!1;let r=this;for(let n=0;n<t-1;n++){let t=e[n];if(!r[k].has(t))return!1;r=r[k].get(t)}let n=e[t-1];return!!r[k].has(n)&&(r[k].delete(n),!0)}contains(...e){let t=e.length;if(0==t)return!1;let r=this;for(let n=0;n<t-1;n++){let t=e[n];if(!r[k].has(t))return!1;r=r[k].get(t)}let n=e[t-1];return r[k].has(n)}clear(){this[k].clear()}}const I=["put","get","contains","remove","clear"];function B(e){return I.includes(e)}class U{get(e,t){if("value"==t)return e[_].value;if("grow"===t)return e[K];if(t===k)return e[k];if("string"==typeof t&&B(t))return e[t];let r=String(t),n=e[k].get(r);return n?H(n):e[K]?(n=M(r),n[K]=e[K],e[k].set(r,n),H(n)):void 0}set(e,t,r){return"value"==t?(e[_].value=r,!0):"grow"===t?(e[K]=O(r),!0):!B(t)&&(null==r?(e[k].delete(t),!0):(console.error(`illegal property:${t}`),!1))}deleteProperty(e,t){return"value"===t||"grow"==t?(console.error(`can not delete property:${String(t)}`),!1):(e[k].delete(t),!0)}}let V=new Proxy(L,{construct:(e,...t)=>H(function(){let e=new L,t=new U,r=new Proxy(e,t),n={put:(...t)=>Reflect.apply(e.put,e,t),get:(...t)=>Reflect.apply(e.get,e,t),remove:(...t)=>Reflect.apply(e.remove,e,t),contains:(...t)=>Reflect.apply(e.contains,e,t),clear:()=>Reflect.apply(e.clear,e,[])};return Object.assign(n,r),Reflect.set(e,"__proxy__",r),e}())});function W(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var s=1,i="";if("?"===e[l=r+1])throw new TypeError('Pattern cannot start with "?" at '+l);for(;l<e.length;)if("\\"!==e[l]){if(")"===e[l]){if(0==--s){l++;break}}else if("("===e[l]&&(s++,"?"!==e[l+1]))throw new TypeError("Capturing groups are not allowed at "+l);i+=e[l++]}else i+=e[l++]+e[l++];if(s)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=l}else{for(var o="",l=r+1;l<e.length;){var a=e.charCodeAt(l);if(!(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a))break;o+=e[l++]}if(!o)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:o}),r=l}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,s=void 0===n?"./":n,i="[^"+z(t.delimiter||"/#?")+"]+?",o=[],l=0,a=0,u="",h=function(e){if(a<r.length&&r[a].type===e)return r[a++].value},c=function(e){var t=h(e);if(void 0!==t)return t;var n=r[a],s=n.type,i=n.index;throw new TypeError("Unexpected "+s+" at "+i+", expected "+e)},f=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};a<r.length;){var p=h("CHAR"),d=h("NAME"),y=h("PATTERN");if(d||y){var m=p||"";-1===s.indexOf(m)&&(u+=m,m=""),u&&(o.push(u),u=""),o.push({name:d||l++,prefix:m,suffix:"",pattern:y||i,modifier:h("MODIFIER")||""})}else{var g=p||h("ESCAPED_CHAR");if(g)u+=g;else if(u&&(o.push(u),u=""),h("OPEN")){m=f();var v=h("NAME")||"",w=h("PATTERN")||"",b=f();c("CLOSE"),o.push({name:v||(w?l++:""),pattern:v&&!w?i:w,prefix:m,suffix:b,modifier:h("MODIFIER")||""})}else c("END")}}return o}function J(e,t){return function(e,t){void 0===t&&(t={});var r=X(t),n=t.encode,s=void 0===n?function(e){return e}:n,i=t.validate,o=void 0===i||i,l=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var a=t?t[i.name]:void 0,u="?"===i.modifier||"*"===i.modifier,h="*"===i.modifier||"+"===i.modifier;if(Array.isArray(a)){if(!h)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===a.length){if(u)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var c=0;c<a.length;c++){var f=s(a[c],i);if(o&&!l[n].test(f))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+f+'"');r+=i.prefix+f+i.suffix}}else if("string"!=typeof a&&"number"!=typeof a){if(!u){var p=h?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+p)}}else{f=s(String(a),i);if(o&&!l[n].test(f))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+f+'"');r+=i.prefix+f+i.suffix}}else r+=i}return r}}(W(e,t),t)}function G(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,s=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],o=n.index,l=Object.create(null),a=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?l[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return s(e,r)})):l[r.name]=s(n[e],r)},u=1;u<n.length;u++)a(u);return{path:i,index:o,params:l}}}(Q(e,r,t),r,t)}function z(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function X(e){return e&&e.sensitive?"":"i"}function Y(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,i=r.start,o=void 0===i||i,l=r.end,a=void 0===l||l,u=r.encode,h=void 0===u?function(e){return e}:u,c="["+z(r.endsWith||"")+"]|$",f="["+z(r.delimiter||"/#?")+"]",p=o?"^":"",d=0,y=e;d<y.length;d++){var m=y[d];if("string"==typeof m)p+=z(h(m));else{var g=z(h(m.prefix)),v=z(h(m.suffix));if(m.pattern)if(t&&t.push(m),g||v)if("+"===m.modifier||"*"===m.modifier){var w="*"===m.modifier?"?":"";p+="(?:"+g+"((?:"+m.pattern+")(?:"+v+g+"(?:"+m.pattern+"))*)"+v+")"+w}else p+="(?:"+g+"("+m.pattern+")"+v+")"+m.modifier;else p+="("+m.pattern+")"+m.modifier;else p+="(?:"+g+v+")"+m.modifier}}if(a)s||(p+=f+"?"),p+=r.endsWith?"(?="+c+")":"$";else{var b=e[e.length-1],x="string"==typeof b?f.indexOf(b[b.length-1])>-1:void 0===b;s||(p+="(?:"+f+"(?="+c+"))?"),x||(p+="(?="+f+"|"+c+")")}return new RegExp(p,X(r))}(W(e,r),t,r)}function Q(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,s=r.exec(e.source);s;)t.push({name:s[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),s=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return Q(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",X(r))}(e,t,r):Y(e,t,r)}const Z=Symbol("sync"),ee=Symbol("resolveRoute");function te(e){let t=!1;return function(...r){if(!t)return t=!0,Reflect.apply(e,{},r)}}class re{constructor(e,t,r,n){this.rootIndex=0,this.name=e,this.level=t,this.rootName=r,this.rootIndex=n}}class ne{constructor(e,t){this.data={},this.to=e,this.from=t}static from(e){var t;let r=new ne(e.to,e.from),n=null!=(t=e.data)?t:{};return R(!0,r.data,n),r}}class se{get fullPath(){var e,t;let r=null!=(e=this.path)?e:`/${this.name}`;return`${null!=(t=this.root)?t:"default"}!${r}`}static isSame(e,t){return e===t||null!=e&&null!=t&&((!e.path||e.path===t.path)&&((!e.name||e.name===t.name)&&(e.root===t.root&&e.index===t.index)))}static isSameForRouteModel(e,t){return e===t||null!=e&&null!=t&&((!e.path||e.path==t.path)&&(!e.name||e.name==t.name))}static from(e){let t=new se;if(void 0===e)return t;let r=t;for(let t in e){let n=e[t];r[t]=n}const n=Object.getOwnPropertySymbols(e);if(void 0!==n&&n.length>0)for(let t of n)r[t]=e[t];return t}}class ie{constructor(e,t,r,n){this.id=E.get(),this.name=e,this.src=t,"function"!=typeof t&&(this.component=t),this.props=r,this.meta=n}get isResolved(){return void 0!==this.component}resolve(){return function(e){let t=e.src;return new Promise(((r,n)=>{const s=te((t=>{x(t)&&(t=t.default),e.component=t,console.debug("success load async module"),r()})),i=te((e=>{console.debug("reject load async module"),n(e)}));let o;try{o=t(s,i)}catch(e){i(e)}if(o)if("function"==typeof o.then)o.then(s,i);else{const e=o.component;e&&"function"==typeof e.then&&e.then(s,i)}}))}(this)}}class oe{constructor(){this.models=[]}}class le{constructor(){this.layers=[]}}var ae,ue,he,ce,fe,pe;(ue=ae||(ae={}))[ue.Push=0]="Push",ue[ue.Replace=1]="Replace",ue[ue.Put=2]="Put",ue[ue.Append=3]="Append",ue[ue.Open=4]="Open",(ce=he||(he={}))[ce.Part=0]="Part",ce[ce.All=1]="All";const de=Symbol("rootKey"),ye=Symbol("rootNodeKey"),me=Symbol("parentNodeKey"),ge=Symbol("nameKey");class ve{constructor(e,t,r=0,n=!0){this.active=!0,this.index=0,this.route=e,this.model=t,this.index=r,this.active=n}}class we{constructor(e,t,r){this[fe]=null,this[pe]=null,this[ge]=e,this[de]=t,r&&(this[ye]=r)}get slots(){return null==this._slots&&(this._slots=t([])),this._slots}get empty(){return null==this._slots||0==this._slots.value.length}get name(){return this[ge]}}fe=ye,pe=me;class be{constructor(e,t,r){this.view=e,this.index=t,this.level=r}static include(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(n.view===t.view&&(-1==t.index||n.index===t.index)&&n.level===t.level)return!0}return!1}}class xe{constructor(){this.views=[]}}class Se{constructor(){this.layers=[]}}class Re{}class Ae{constructor(){this.forbidTime=300,this.submitRecorder=new Re}isSameRoute(e,t){return null!=e&&null!=t&&(e.name===t.name&&e.path===t.path&&e.root===t.root)}acquire(e){let t=(new Date).getTime();if(!(this.isSameRoute(e,this.submitRecorder.route)&&this.submitRecorder.time&&t-this.submitRecorder.time<=this.forbidTime))return this.submitRecorder.route=e,this.submitRecorder.time=t,t;this.submitRecorder.time=t}release(e){this.submitRecorder.time===e&&(this.submitRecorder.route=void 0)}}const Ce=void 0!==typeof window,Ee=window,Pe=window.document;function Te(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent(`on${t}`,r):e[`on${t}`]=r}function Oe(e,t,r){e.removeEventListener?e.removeEventListener(t,r):e.detachEvent?e.detachEvent(`on${t}`,r):e[`on${t}`]=null}let je=function(){let e=Ee.location,t=`${e.protocol}//${e.host}`;return t+=function(e){let t=e,r=t.lastIndexOf("/");return r>0&&r<t.length-1?t=t.substring(0,r+1):0===r&&-1!==t.indexOf(".")?t="/":-1===r&&(t=-1==t.indexOf(".")?`/${t}/`:"/"),0!==t.indexOf("/")&&(t=`/${t}`),t}(e.pathname),t}();const $e={type:"GET",async:!0,contentType:"application/x-www-form-urlencoded",dataType:"string",cache:!1,timeout:3e4,processData:!0};function Fe(e){let t=new XMLHttpRequest,r={};if(R(!0,r,$e),R(!0,r,e),(e=r).async)try{t.responseType=e.dataType,t.timeout=e.timeout,t.ontimeout=function(){"function"==typeof e.ontimeout?e.ontimeout(t,t.status):"function"==typeof e.error&&e.error(t,t.status)}}catch(e){console.error(e.message,e)}t.onabort=function(){"function"!=typeof e.onabort?"function"==typeof e.error&&e.error(t,t.status):e.onabort(t,t.status)},t.onerror=function(){"function"==typeof e.error&&e.error(t,t.status)},t.onloadend=function(){"function"==typeof e.complete&&e.complete(t,t.status)},t.onprogress=function(){"function"==typeof e.loading&&e.loading(t)},t.onload=function(){var r,n;if(0==t.status||t.status>=200&&t.status<300||304==t.status){let s=null!=(r=t.response)?r:"";if(0==s.length&&0==t.status)return;try{n=s,"json"===e.dataType&&"string"==typeof n&&(n=JSON.parse(n)),s=n}catch(e){console.error(e.message,e)}"function"==typeof e.success&&e.success(s,t.status,t)}else"function"==typeof e.error&&e.error(t,t.status)};try{let r=e.url;if(e.type&&"GET"===e.type.toUpperCase()&&(r=function(e,t,r="text"){if(null==t)return e;let n="";if(0===(r=r.trim().toLowerCase()).indexOf("application/x-www-form-urlencoded")||0===r.indexOf("application/json"))if("object"==typeof t)for(let e in t){let r=t[e];if(Array.isArray(r))for(let t=0;t<r.length;t++){let s=`${encodeURIComponent(e)}=${encodeURIComponent(r[t])}`;n.length>0&&(n+="&"),n+=s}else{let t=`${encodeURIComponent(e)}=${encodeURIComponent(r)}`;n.length>0&&(n+="&"),n+=t}}else n=t;else n=t;return n.length>0&&(e=-1===e.indexOf("?")?`${e}?${n}`:`${e}&${n}`),e}(e.url,e.data,e.contentType)),t.open(e.type,r,e.async),e.contentType&&t.setRequestHeader("Content-Type",e.contentType),"function"==typeof e.beforeSend){let r={};R(!0,r,e),Reflect.apply(e.beforeSend,e,[t,r])}if(e.cache||t.setRequestHeader("Cache-Control","no-cache"),e.type&&"POST"===e.type.toUpperCase()){let r=e.processData?function(e,t="text"){let r="";if(0===(t=t.trim().toLowerCase()).indexOf("application/x-www-form-urlencoded"))if("object"==typeof e)for(let t in e){let n=e[t];if(Array.isArray(n))for(let e=0;e<n.length;e++){let s=`${encodeURIComponent(t)}=${encodeURIComponent(n[e])}`;r.length>0&&(r+="&"),r+=s}else{let e=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;r.length>0&&(r+="&"),r+=e}}else r=e;else r=0===t.indexOf("text")?"object"==typeof e?JSON.stringify(e):e:0===t.indexOf("application/json")&&"object"==typeof e?JSON.stringify(e):e;return r}(e.data,e.contentType):e.data;t.send(r)}else t.send()}catch(r){"function"==typeof e.error&&e.error(t,r.message),"function"==typeof e.complete&&e.complete(t,r.message)}return t}let qe=new class{constructor(){this.cache=new Map}get(e,t=-1){return new Promise(((r,n)=>{if(this.cache.has(e)){let t=this.cache.get(e);r(t)}else Fe({url:e,type:"GET",cache:!1,data:{},timeout:t,async:!0,success:(t,n,s)=>{this.cache.set(e,t),r(t)},error:(e,t)=>{n(t)}})}))}};var _e,ke;(ke=_e||(_e={}))[ke.Loading=0]="Loading",ke[ke.Loaded=1]="Loaded",ke[ke.Defining=2]="Defining",ke[ke.Defined=3]="Defined";class Ke{}class Ne{constructor(){this.register=new Map}get(e){return this.register.get(e)}put(e,t){this.register.set(e,t)}remove(e){let t=this.register.get(e);return this.register.delete(e),t}contains(e){return this.register.has(e)}clear(){this.register.clear()}}var De,Me,He,Le,Ie,Be,Ue,Ve,We,Je;(Je=We||(We={})).Busy="Busy",Je.Free="Free",Je.Reject="Reject",Je.Exception="Exception",Je.Finished="Finished";const Ge=Symbol("chainKey"),ze=Symbol("cursorKey"),Xe=Symbol("$persistentModeKey"),Ye=Symbol("statusKey"),Qe=Symbol("argsKey"),Ze=Symbol("exArgsKey"),et=Symbol("successFnsKey"),tt=Symbol("errorFnsKey"),rt=Symbol("sessionKey"),nt=Symbol("_go");class st{constructor(e,t=!1){this[De]=[],this[Me]=0,this[He]=!1,this[Le]=We.Free,this[Ie]=[],this[Be]=[],this[Ue]=[],this[Ve]=[],this[rt]=e,this[Xe]=t}get session(){return this[rt]}[(De=Ge,Me=ze,He=Xe,Le=Ye,Ie=Qe,Be=Ze,Ue=et,Ve=tt,nt)](e,...t){let r=this[Ye];if(this[Ye]=We.Busy,this[ze]+=e,this[ze]<0&&(this[ze]=0),this[Qe]=t,r===We.Exception||r===We.Reject){let e=[{session:this[rt]},...this[Ze]];for(;this[tt].length>0;)try{let t=this[tt].shift();"function"==typeof t&&T((()=>{Reflect.apply(t,{},e)}))}catch(e){console.error(e.message,e)}return this[Ye]=r,this[Ge]=[],this[ze]=0,this}if(r===We.Finished||this[ze]>=this[Ge].length){let e=[{session:this[rt]},...this[Qe]];for(;this[et].length>0;){let t=this[et].shift();"function"==typeof t&&T((()=>{Reflect.apply(t,{},e)}))}return this[Ye]=We.Free,this}if(this[ze]>=this[Ge].length)return this[Ye]=We.Free,this;let n=this[Ge][this[ze]];this[Xe]||(this[Ge].splice(0,this[ze]+1),this[ze]=-1);let s=this[ze]+1;try{let e=!1,t={go:(t,...r)=>{e||(e=!0,Reflect.apply(this[nt],this,[t,...r]))},resolve:(...t)=>{e||(e=!0,Reflect.apply(this[nt],this,[1,...t]))},reject:(...t)=>{e||(e=!0,Reflect.apply(this.reject,this,[...t]))},insert:t=>{e||(this[Ge].splice(s,0,t),s++)},session:this[rt]};T((()=>{Reflect.apply(n,{},[t,...this[Qe]])}))}catch(e){this.throw(e)}return this}go(e,...t){return Reflect.apply(this[nt],this,[e,...t])}finish(...e){return this[Ye]=We.Finished,this[Qe]=e,Reflect.apply(this[nt],this,[0])}reject(...e){return this[Ye]=We.Reject,this[Ze]=e,Reflect.apply(this[nt],this,[0])}throw(...e){return this[Ye]=We.Exception,this[Ze]=e,Reflect.apply(this[nt],this,[0])}reset(...e){this[Ye]=We.Busy,this[Qe]=e,this[Ge]=[],this[ze]=0;let t=[{session:this[rt]},...this[Qe]];for(;this[et].length>0;){let e=this[et].shift();T((()=>{Reflect.apply(e,this,t)}))}return this[Ye]=We.Free,this}post(e){return this[Ye]===We.Reject||this[Ye]===We.Exception?this:(Array.isArray(e)?this[Ge]=[...this[Ge],...e]:this[Ge].push(e),this[Ye]===We.Busy||Reflect.apply(this[nt],this,[0,...this[Qe]]),this)}wait(e,t){return e&&"function"==typeof e&&this[et].push(e),t&&"function"==typeof t&&this[tt].push(t),this[Ye]===We.Busy||Reflect.apply(this[nt],this,[0,...this[Qe]]),this}exception(e){return e&&"function"==typeof e&&this[tt].push(e),this[Ye]===We.Busy?this:Reflect.apply(this[nt],this,[0,...this[Qe]])}isFinish(){return this[Ye]==We.Reject||this[Ye]==We.Free&&this[ze]>=this[Ge].length}}class it{constructor(e={}){this.moduleManager=new Ne,this.head=Pe.head||Pe.getElementsByTagName("head")[0]||Pe.documentElement,this.isOldWebKit=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,this.options=e,this.options.paths||(this.options.paths={}),this.options.alias||(this.options.alias={})}ensure(...e){let t,r=[],n=e.length-1,s={};"object"==typeof e[n]&&(R(!0,s,e[n]),n--),"function"==typeof e[n]&&(t=e[n],n--);for(let t=0;t<=n;t++)if(Array.isArray(e[t])){let n=e[t];for(let e=0;e<n.length;e++)void 0!==n[e]&&r.push(this.resolvePath(n[e]))}else{let n=e[t].split(",");for(let e=0;e<n.length;e++)void 0!==n[e]&&r.push(this.resolvePath(n[e]))}let i=new lt(r.length,((e,r)=>{if(i.isOK())try{"function"==typeof t&&Reflect.apply(t,{},r)}catch(e){console.error(e.message,e)}else try{console.error(e),"function"==typeof t&&Reflect.apply(t,{},[])}catch(e){console.error(e.message,e)}})),o=new st;for(let e=0;e<r.length;e++){let t=new at(e,r[e],s,i);this.mount(o,t)}return this}mount(e,t){if(this.isNaturePath(t.src,"js")){let r=t.params.jsPoint;return null==r&&(r=this.head),void this.mountJS(e,t,r)}if(this.isNaturePath(t.src,"css")){let r=t.params.cssPoint;return null==r&&(r=this.head),void this.mountCSS(e,t,r)}if(this.isNaturePath(t.src,"html")){let r=t.params.htmlPoint;return null==r&&(r=Pe.body),void this.mountHTML(e,t,r)}let r=this.getFileNamePostfix(t.src);if("js"===r||0===r.length){let r=t.params.jsPoint;return null==r&&(r=this.head),void this.mountJS(e,t,r)}if("css"===r){let r=t.params.cssPoint;return null==r&&(r=this.head),void this.mountCSS(e,t,r)}{let r=t.params.htmlPoint;return null==r&&(r=Pe.body),void this.mountHTML(e,t,r)}}mountHTML(e,t,r){e.post((e=>{let n=t.params.timeout||this.options.timeout||3e4,s=t.src;qe.get(s,n).then((n=>{r.innerHTML=n,t.progress.work(!0,t.index,n),e.resolve()}),(r=>{console.error(r),t.progress.work(!1,t.index,null),e.reject()}))}))}mountCSS(e,t,r){e.post((e=>{let n=t.src,s=Pe.createElement("link");s.setAttribute("crossorigin","true");let i="onload"in s;if(this.isOldWebKit||!i){let n={timeout:this.options.time||3e3,time:0,isOldWebKit:this.isOldWebKit,success:()=>{t.progress.work(!0,t.index,t.src),e.resolve()},error:()=>{try{r.removeChild(s)}catch(e){console.error(e.message,e)}t.progress.work(!1,t.index,null),e.resolve()}};setTimeout((()=>{ot(s,n)}),1)}else s.onload=()=>{s.onload=s.onerror=null,t.progress.work(!0,t.index,t.src),e.resolve()},s.onerror=()=>{try{r.removeChild(s)}catch(e){console.error(e.message,e)}s.onload=s.onerror=null,t.progress.work(!1,t.index,null),e.reject()};let o=Pe.getElementById(n);o&&o.parentNode&&o.parentNode.removeChild(o),s.rel="stylesheet",s.type="text/css",s.id=n,s.href=n,r.appendChild(s)}))}mountJS(e,t,r){e.post((e=>{let n=t.src,s=this.moduleManager.get(n);if(s&&(s.status==_e.Defined||s.status==_e.Loaded)){if(s.exports)return t.progress.work(!0,t.index,s.exports),void e.resolve();if(document.querySelector(`script[src='${n}`))return t.progress.work(!0,t.index,s.exports),void e.resolve()}s=new Ke,s.id=n,s.src=n,s.status=_e.Loading,this.moduleManager.put(n,s);let i=Pe.createElement("script");if(i.setAttribute("crossorigin","true"),"onload"in i)i.onload=()=>{i.onload=i.onerror=null,s.status==_e.Loading&&(s.status=_e.Loaded,t.progress.work(!0,t.index,n)),e.resolve()},i.onerror=()=>{try{r.removeChild(i)}catch(e){console.error(e.message,e)}i.onload=i.onerror=null,t.progress.work(!1,t.index,null),e.reject()};else{let r=i;r.onreadystatechange=()=>{/loaded|complete/.test(r.readyState)&&(r.onreadystatechange=null,s.status==_e.Loading&&(s.status=_e.Loaded,t.progress.work(!0,t.index,n)),e.resolve())}}i.defer=!0,i.src=n,Ee.define=this.createDefine(s,t),r.appendChild(i)}))}trimEmptyElement(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r].trim();0!==n.length&&t.push(n)}return t}createDefine(e,t){let r=this,n=function(...n){let s,i,o;e.status=_e.Defining;let l=n.length;1===l?(o=n[0],s=void 0):2===l?(o=n[1],Array.isArray(n[0])?(i=r.trimEmptyElement(n[0]),s=void 0):i=void 0):(s=n[0],i=r.trimEmptyElement(n[1]),o=n[2]),s&&(e.id=s,r.options.alias[s]=e.src),i&&i.length>0?r.ensure(i,((...r)=>{e.exports="function"==typeof o?Reflect.apply(o,e,r):o,e.status=_e.Defined,t.progress.work(!0,t.index,e.exports)})):(e.exports="function"==typeof o?Reflect.apply(o,e,[]):o,e.status=_e.Defined,t.progress.work(!0,t.index,e.exports))};return n.amd=!0,n}resolvePath(e){try{if(this.isNaturePath(e,"all"))return e;e=this.parserPath(e,!0);let t=this.getFileNamePostfix(e);return t=t.toLowerCase(),-1==e.indexOf("?")?("js"!==t&&"css"!==t&&"html"!==t&&(e+=".js"),e+="?version=",e+="3.0.0"):(e+="&version=",e+="3.0.0"),e}catch(t){throw console.error(`resolve path[${e}] fail`,t),t}}getFileNamePostfix(e){let t=e.lastIndexOf("?");-1==t&&(t=e.length);let r=e.lastIndexOf(".",t);return-1==r?"":e.substring(r+1,t)}isNaturePath(e,t){if(null==this.options.nature)return!1;if("all"===t||"js"===t){let t=this.options.nature.js;if(void 0!==t)for(let r=0;r<t.length;r++){let n=t[r];if(0===e.indexOf(n))return!0}}if("all"===t||"css"===t){let t=this.options.nature.css;if(void 0!==t)for(let r=0;r<t.length;r++){let n=t[r];if(0===e.indexOf(n))return!0}}if("all"===t||"html"===t){let t=this.options.nature.html;if(void 0!==t)for(let r=0;r<t.length;r++){let n=t[r];if(0===e.indexOf(n))return!0}}return!1}parserPath(e,t){if(0==e.indexOf("http://"))return e;if(0==e.indexOf("https://"))return e;if(0==e.indexOf("file:///"))return e;if(0==e.indexOf("/")){return je+e.slice(1)}if(0==e.indexOf("./")){return je+e.slice(2)}if(t){let t=this.options.alias[e];if(!t){let r=e.indexOf("/");if(-1==r)t=e;else{let n=e.slice(0,r),s=this.options.paths[n];t=s?s+e.slice(r):e}}return this.parserPath(t,!1)}return je+e}}function ot(e,t){let r=e.sheet,n=!1;if(t.isOldWebKit)r&&(n=!0);else if(r)try{r.cssRules&&(n=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(n=!0)}setTimeout((()=>{t.time+=20,n?t.success():t.time>t.timeout?t.error():ot(e,t)}),20)}class lt{constructor(e,t){this.size=e,this.callback=t,this.status=!0,this.values=[],this.lastIndex=-1}work(e,t,r){if(this.status=e,!0===this.status&&(this.lastIndex!==t&&this.size--,this.lastIndex=t,this.values.push(r)),0===this.size||!1===this.status)try{Reflect.apply(this.callback,this,[this.status,this.values])}catch(e){console.error(e.message,e)}}isOK(){return this.status}}class at{constructor(e,t,r,n){this.index=e,this.src=t,this.params=r,this.progress=n}}const ut=Symbol("_notifyChange"),ht=Symbol("_generateLocation"),ct=Symbol("_setHashRecorder");class ft{constructor(e="",t=!0,r="/"){this.query=e,this.hashMonitor=t,this.defaultPath=r}init(){if(!this.hashMonitor)return;if(this.historyChange)return;this.historyChange=()=>{if(!this.hashMonitor)return;let e=Ee.history.state;this[ut](e)},Te(Ee,"popstate",this.historyChange);let e=this.getHash()||this.defaultPath,t=Ee.sessionStorage.getItem(e);if(t){let e=JSON.parse(t);this[ut](e)}else{let t,r=e.indexOf("!");t=-1!=r?e.substring(r+1):e,this[ut](t)}}destroy(){this.historyChange&&Oe(Ee,"popstate",this.historyChange)}[ct](e,t){if(this.hashMonitor)try{this.lastHash&&Ee.sessionStorage.removeItem(this.lastHash);let r=JSON.stringify(t);Ee.sessionStorage.setItem(e,r),this.lastHash=e}catch(e){console.error(e.message)}}listen(e){this.changeHandle=e}[ut](e){"function"==typeof this.changeHandle&&this.changeHandle(e)}go(e){Ee.history.go(e)}push(e){let t=this[ht](e.currentRoute);Ee.history.pushState(e.routes,"",t),this[ct](e.currentRoute.fullPath,e.routes)}replace(e){let t=this[ht](e.currentRoute);Ee.history.replaceState(e.routes,"",t),this[ct](e.currentRoute.fullPath,e.routes)}[ht](e){let t;if(e.query){let r="";if("object"==typeof e.query)for(let t in e.query){let n=encodeURIComponent(e.query[t]),s=`${encodeURIComponent(t)}=${n}`;r.length>0&&(r+="&"),r+=s}else r=e.query;this.query?(t=`${this.query}&${r}`,"?"!==t.charAt(0)&&(t=`?${t}`)):t=`?${r}`}const r=Ee.location;let n;return n=t?`${r.origin}${r.pathname}${t}#${e.fullPath}`:`${r.origin}${r.pathname}#${e.fullPath}`,n}getHash(){let e=Ee.location.hash,t=e.indexOf("#");if(-1!=t){return e.substring(t+1)}}}class pt{constructor(e,t){this.currentRoute=e,this.routes=t}}var dt,yt,mt,gt,vt,wt,bt,xt,St,Rt,At,Ct,Et,Pt=Object.defineProperty,Tt=Object.defineProperties,Ot=Object.getOwnPropertyDescriptors,jt=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,qt=(e,t,r)=>t in e?Pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_t=(e,t)=>{for(var r in t||(t={}))$t.call(t,r)&&qt(e,r,t[r]);if(jt)for(var r of jt(t))Ft.call(t,r)&&qt(e,r,t[r]);return e};const kt=Symbol("_constructRouteModel"),Kt=Symbol("_findRouteModel"),Nt=Symbol("_findRootView"),Dt=Symbol("_removeView"),Mt=Symbol("_buildPage"),Ht=Symbol("_resolveComponent"),Lt=Symbol("_update"),It=Symbol("_merge"),Bt=Symbol("ignoreHistoryChangeOnceKey"),Ut=Symbol("_handleHistoryChange"),Vt=Symbol("_notifyChange"),Wt=Symbol("currentRoutes"),Jt=Symbol("current"),Gt=Symbol("_addRouteRecorder"),zt=Symbol("_removeRouteRecorder"),Xt=Symbol("_cloneRouteRecorder"),Yt=Symbol("_recordError"),Qt=Symbol("registerKey"),Zt=Symbol("notFoundKey"),er=Symbol("forestKey"),tr=Symbol("historyKey"),rr=Symbol("beforeFiltersKey"),nr=Symbol("afterFiltersKey"),sr=Symbol("destroyFiltersKey"),ir=Symbol("mainDispatcherKey"),or=Symbol("initKey"),lr=Symbol("requireKey"),ar=Symbol("_createNextFn"),ur=Symbol("_start"),hr=Symbol("_before"),cr=Symbol("_after"),fr=Symbol("_destroy"),pr=Symbol("_load"),dr=Symbol("_unload"),yr=Symbol("_loadDependency"),mr=Symbol("resolvedModulesKey"),gr=Symbol("resolveDependencyKey"),vr=Symbol("routerGuardKey");class wr{constructor(t){var r;this[dt]=new Array,this[yt]=new Se,this[mt]=new Array,this[gt]=new Array,this[vt]=new Array,this[wt]=new Array,this[bt]=new st,this[xt]=new Map,this[St]=new Ae,this[Rt]=!1,this[At]=e(null),this[Ct]=new it,this[Et]=!1,this.options=null!=t?t:{};let n=this.options.routes||[];this.addRoutes(n),this.options.notFound&&this.setNotFoundRoute(this.options.notFound),this[tr]=new ft(this.options.query,this.options.hashMonitor,this.options.defaultPath),null==(r=this[tr])||r.listen((e=>{if("string"==typeof e){let t=this[ee](e);t&&this[Ut]([t])}else this[Ut](e)}))}get require(){return this[lr]}get current(){return this[Jt].value}[(dt=Qt,yt=er,mt=Wt,gt=rr,vt=nr,wt=sr,bt=ir,xt=mr,St=vr,Rt=or,At=Jt,Ct=lr,Yt)](e="error",t){t&&"function"==typeof t.error&&t.error(e),console.error(e)}init(){var e;!0!==this[or]&&(null==(e=this[tr])||e.init(),this[or]=!0)}[(Et=Bt,Ut)](e){this[Bt]?this[Bt]=!1:this[ir].post((t=>{try{if(!e){let e=[...this[Wt]].reverse();return this[dr](e),Ee.location.reload(),void t.resolve()}let r=[],n=[],s=0;for(;s<e.length&&s<this[Wt].length&&se.isSame(e[s],this[Wt][s]);s++);if(s<e.length&&(r=e.slice(s)),s<this[Wt].length&&(n=this[Wt].slice(s).reverse()),0==n.length&&0==r.length)return void t.resolve();n.length>0?this[dr](n).then((()=>{r.length>0?this.restore(r).then((()=>{t.resolve()}),(e=>{this[Yt](e),t.resolve()})):t.resolve()})):this.restore(r).then((()=>{t.resolve()}),(e=>{this[Yt](e),t.resolve()}))}catch(e){this[Yt](e.message),t.resolve()}}))}[Vt](){let e=this[Wt].length;this[Jt].value=e>0?this[Wt][e-1]:null}[Gt](e,t=-1){t<0||t>=this[Wt].length?this[Wt].push(e):this[Wt].splice(t,0,e)}[Xt](){let e=[];for(let t of this[Wt]){let r=new se;A(r,t,!0),e.push(r)}return e}[zt](e){if(null==this[Wt])return;let t=-1;for(let r=0;r<this[Wt].length;r++)if(se.isSame(this[Wt][r],e)){t=r;break}if(-1!=t){let e=this[Wt][t];this[Wt].splice(t,1),this[fr](e,e.session)}}setHashMonitorEnabled(e){null!=this[tr]&&(this[tr].hashMonitor=e)}beforeEach(e){this[rr].push(e)}afterEach(e){this[nr].push(e)}destroyEach(e){this[sr].push(e)}setResolveDependency(e){this[gr]=e}addRoutes(e){for(let t of e)this.addRoute(t)}addRoute(e,t=-1){let r=this[kt](e);if(-1==t)this[Qt]=[...this[Qt],...r];else for(let e=r.length-1;e>=0;e--)this[Qt].splice(t,0,r[e])}setNotFoundRoute(e){let t=this[kt](e);this[Zt]=t[0]}getRoutes(){return[...this[Qt]]}[kt](e){var t;let r=null!=(t=e.path)?t:"";r.length>0&&"/"!==r.charAt(0)&&(r=`/${r}`);let n=e.components||e.component&&{"":e.component};if(null==n){let t=new le;return t.path=r,t.redirect=e.redirect,[t]}let s=[];for(let t in n){let r=n[t];0===t.length&&(t="default");let i=new ie(t,r,e.props,e.meta);s.push(i)}let i=!1,o=[];if(e.children)for(let t of e.children){let e=this[kt](t);for(let t of e){let e=new le;e.name=t.name,t.path&&t.path.length>0?e.path=`${r}${t.path}`:(i=!0,e.path=r);let n=new oe;n.models=[...s],e.layers=[n,...t.layers],o.push(e)}}if(!i){let t=new oe;t.models=s;let n=new le;n.name=e.name,n.path=r,n.layers=[t],o.splice(0,0,n)}return o}[Kt](e){var t;let r=e.route;try{for(let n of this[Qt]){if(r.path&&n.path){let s=n.match;null==s&&(s=n.match=G(n.path));let i=s(r.path);if(!i)continue;if(n.redirect){let t=new se;R(!0,t,r),t.path=n.redirect;let s={route:t,find:void 0};return!!this[Kt](s)&&(e.route=s.route,e.find=s.find,!0)}return r.params=null!=(t=r.params)?t:{},R(!0,r.params,i.params),e.find=n,!0}if(r.name===n.name){r.params=r.params||{};let t=J(n.path);return r.path=t(r.params),e.find=n,!0}}}catch(e){console.error(e.message,e),"function"==typeof r.error&&r.error(e.message)}return!1}[ee](e){var t,r,n;let s=null;if(Array.isArray(e))if(s=new se,"object"==typeof e[0])s=se.from(e[0]);else for(let t=0;t<e.length;t++)0===t?"/"==e[t].charAt(0)?s.path=e[t]:s.name=e[t]:1===t?s.params=e[t]:2===t?s.root=e[t]:3===t&&R(!1,s,e[t]);else"object"==typeof e?s=se.from(e):"string"==typeof e&&(s=new se,"/"==e.charAt(0)?s.path=e:s.name=e);if(s){if(s.path){let e=s.path.indexOf("?");-1!==e&&e<s.path.length-1&&(s.query=s.path.substring(e+1),s.path=s.path.substring(0,e))}s.root=null!=(t=s.root)?t:"default",s.opsType=null!=(n=null!=(r=s.opsType)?r:this.options.defaultOperationType)?n:ae.Push}return s}push(...e){let t=this[ee](e);return t?(t.opsType=t.opsType||ae.Push,this.to(t)):(this[Yt]("resolve route fail"),this)}put(...e){let t=this[ee](e);return t?(t.opsType=ae.Put,this.to(t)):(this[Yt]("resolve route fail"),this)}replace(...e){let t=this[ee](e);return t?(t.opsType=ae.Replace,this.to(t)):(this[Yt]("resolve route fail"),this)}append(...e){let t=this[ee](e);return t?(t.opsType=ae.Append,this.to(t)):(this[Yt]("resolve route fail"),this)}remove(e){return new Promise((t=>{this[ir].post((r=>{var n,s;try{if(0===this[Wt].length)return r.resolve(),void t(!1);let i,o=-1,l=[];if(e){if(e.root)i=e.root;else{i=null!=(n=this[Wt][0].root)?n:"default"}if(e.all)for(let e=this[Wt].length-1;e>0;e--){let t=this[Wt][e];t.opsType===ae.Append&&t.root===i&&(l.splice(0,0,t),o=e-1)}else if(e.until)for(let t=this[Wt].length-1;t>0;t--){let r=this[Wt][t];if(r.opsType===ae.Append&&r.root===i){if("/"===e.until.charAt(0)&&e.until===r.path){o=t;break}if(e.until===r.name){o=t;break}l.splice(0,0,r)}}}else{i=null!=(s=this[Wt][0].root)?s:"default";for(let e=this[Wt].length-1;e>0;e--){let t=this[Wt][e];if(t.opsType===ae.Append&&t.root===i){l.push(t),o=e-1;break}}}if(0===l.length)return r.resolve("can not find route"),void t(!1);let a=0;this[Wt].forEach((e=>{e.opsType!==ae.Put&&a++})),this[dr](l).then((()=>{let e=0;this[Wt].forEach((t=>{t.opsType!==ae.Put&&e++}));let n=a-e;this[Bt]=!0,this.back(n),r.resolve(),t(!0)}))}catch(e){this[Yt](e.message),r.resolve(),t(!1)}}))}))}open(...e){let t=this[ee](e);return t?(t.opsType=ae.Open,this.to(t)):(this[Yt]("resolve route fail"),this)}close(e){return this[ir].post((t=>{try{let r=this[ee](e);if(!r)return void t.reject("resolve route fail");let n=[];for(let e=0;e<this[Wt].length;e++){let t=this[Wt][e];if(t.root===r.root){if(r.path&&r.path===t.path){n.push(t);break}if(r.name&&r.name===t.name){n.push(t);break}}}if(0===n.length)return void t.resolve();this[dr](n).then((()=>{var e;let n=new se;A(n,r,!0);const s=new pt(n,this[Xt]());null==(e=this[tr])||e.replace(s),this[Vt](),t.resolve()}))}catch(e){this[Yt](e.message),t.resolve()}})),this}to(...e){let t=this[ee](e);if(!t)return this[Yt]("resolve route fail"),this;let r=this[vr].acquire(t);return null==r?(this[Yt]("route forbid"),this):(this[ir].post((e=>{try{let n=this[ur](t);this[hr](n),this[gr]&&this[yr](n),this[pr](n),this[cr](n),n.wait(((n,s)=>{var i,o;let l=n.session.to,a=new se;A(a,t,!0);const u=new pt(a,this[Xt]());if(l.opsType===ae.Replace?null==(i=this[tr])||i.replace(u):null==(o=this[tr])||o.push(u),this[vr].release(r),this[Vt](),"function"==typeof t.success)try{Reflect.apply(t.success,{},[])}catch(e){console.error(e.message,e)}e.resolve()}),((t,n)=>{this[vr].release(r),this[Yt](n),e.resolve()}))}catch(t){this[vr].release(r),this[Yt](t.message),e.resolve()}})),this)}back(e){var t;null==(t=this[tr])||t.go(-e)}[ar](e){return(t,r)=>{if("boolean"==typeof t)t?e.resolve():e.reject(r);else if(t){let r=this[ee](t);if(r){let t=e.session.to;r.success=t.success,r.error=t.error,e.session.to=r,e.resolve()}else e.reject("route resolve fail")}else e.resolve()}}[ur](e){let t=this[Wt].length>0?this[Wt][0]:void 0,r=new ne(e,t);return new st(r)}[hr](e){for(let t of this[rr])e.post((e=>{let r=this[ar](e);Reflect.apply(t,{},[e.session.to,e.session.from,r,e.session])}))}[cr](e){e.post((e=>{for(let t of this[nr])try{Reflect.apply(t,{},[e.session.to,e.session.from,e.session])}catch(e){console.error(e.message,e)}e.resolve()}))}[fr](e,t){for(let r of this[sr])try{Reflect.apply(r,{},[e,t])}catch(e){console.error(e.message,e)}"function"==typeof e.destroy&&Reflect.apply(e.destroy,e,[])}[yr](e){let t=e.session,r=Reflect.apply(this[gr],this,[null==t?void 0:t.to]);if(null==r)return;Array.isArray(r)||(r=[r]);let n=[];for(let e of r)this[mr].has(e)||n.push(e);0!==n.length&&e.post((e=>{this[lr].ensure(n,((...t)=>{if(t){for(let e of t){if(!e)continue;let t;t=x(e)?e.default:e,Array.isArray(t)&&this.addRoutes(t)}for(let e of n)this[mr].set(e,!0);e.resolve()}else e.reject()}))}))}[pr](e){e.post((e=>{let t={route:e.session.to,find:void 0};if(!this[Kt](t)){if(!this[Zt])return void e.reject("not find route model");t.find=this[Zt]}let r=ne.from(e.session);this[Mt](t.route,t.find,r).then((t=>{this[er],e.resolve()}),(t=>{e.reject(t)}))}))}[dr](e){if(0==e.length)return Promise.resolve();let t=this[er],r=[];for(let s of e){let e=this[Nt](t,s);null!=e&&r.push((n=_t({},e),Tt(n,Ot({route:s}))))}var n;if(0==r.length){let e="can not find view index";return this[Yt](e),Promise.reject(e)}return new Promise(((e,n)=>{var s;for(let e of r.reverse())this[Dt](t,{x:e.x,y:e.y},[null!=(s=e.route.index)?s:0],!0);this[Vt](),e()}))}[Nt](e,t){var r;let n,s=null!=(r=t.root)?r:"default";for(let t=0;t<e.layers.length;t++){let r=e.layers[t];for(let e=r.views.length-1;e>=0;e--){let i=r.views[e];if(i[de]&&i[ge]===s)return n={x:e,y:t},n}}return null}[Dt](e,t,r=null,n=!0){if(t.y>=e.layers.length)return;if(t.x>=e.layers[t.y].views.length)return;let s=e.layers[t.y].views[t.x],i=[],o=!1,l=s.slots.value;for(let e=l.length-1;e>=0;e--){let n=l[e];null!=r&&-1==r.indexOf(n.index)||(n.route&&s[de]&&(this[zt](n.route),!0===n.active&&n.route.opsType==ae.Append&&(o=!0)),i.push(new be(s,n.index,t.y)),l.splice(e,1))}if(0==l.length)n?s.slots.value=[...l]:e.layers[t.y].views.splice(t.x,1);else{if(o){let e=l[l.length-1];e.active=!0,e.route&&(e.route.active=e.active)}s.slots.value=[...l]}let a=t.y+1;for(;a<e.layers.length;a++){let t=e.layers[a].views,r=[];for(let n=t.length-1;i.length>0&&n>=0;n--){let s=t[n];if(s[me]&&be.include(i,s[me])){let t=s.slots.value;for(let e=t.length-1;e>=0;e--){let n=t[e];n.route&&s[de]&&this[zt](n.route),r.push(new be(s,n.index,a)),t.splice(e,1)}e.layers[a].views.splice(n,1)}i=r}}}restore(e){if(e&&0!=this[Qt].length){let t=[];for(let r=0;r<e.length;r++){let n=e[r],s=new Promise(((e,t)=>{let r=this[ur](n);this[hr](r),this[gr]&&this[yr](r),this[pr](r),this[cr](r),r.wait(((t,r)=>{e()}),((e,r)=>{this[Yt](r),t()}))}));t.push(s)}return t.length>0?Promise.all(t).then((()=>{this[Vt]()})):Promise.resolve()}{let e=this[er];if(e.layers.length>0){let t=e.layers[0].views;t.length>0&&(t[0].slots.value=[])}return this[Wt]=[],this[Vt](),Promise.resolve()}}[Mt](e,t,r){var n;let s=null!=(n=e.updateType)?n:he.Part;return this[Ht](t).then((()=>{this[Lt](t,e,r,s)}))}[Ht](e){let t=[];for(let r=0;r<e.layers.length;r++){let n=e.layers[r];for(let e=0;e<n.models.length;e++){let r=n.models[e];r.isResolved||t.push(r.resolve())}}return t.length>0?Promise.all(t):Promise.resolve()}[Lt](e,t,r,n){var s,i,o,l;if(1!==e.layers[0].models.length)return Promise.reject("illegal route structure(multil root node)");const a=e.layers[0].models[0];let u,h,c=this[er],f=function(e){return 0==e.layers.length||0==e.layers[0].views.length}(c),p=null!=(s=t.root)?s:"default";f||n!=he.Part||(u=this[Nt](c,t));let d=0;if(null==u||null==u)if(f||n===he.All){if(0==c.layers[0].views.length){let e=null!=(i=t.root)?i:"default";h=new we(e,!0,null),c.layers[0].views=[h]}else h=c.layers[0].views[0];u={x:0,y:0}}else{let e=t.slot;if(!e)return Promise.reject("can not rebuild view(because not route slot)");let r,n=e.level;if(n>c.layers.length)return Promise.reject("can not insert view(override level)");if(e.rootName){let t=c.layers[n-1];for(let s of t.views){if(s[de]&&s.name===e.rootName){r=new be(s,null!=(o=e.rootIndex)?o:0,n-1);break}if(s[ye]&&s[ye].view.name===e.rootName&&s[ye].index===e.rootIndex){r=s[ye];break}}}if(!r)return Promise.reject("can not insert view(not find root node ref)");h=new we(p,!0,r),c.layers[n].views.push(h),u={x:c.layers[n].views.length-1,y:n}}else h=c.layers[u.y].views[u.x];if(d=u.y,h[de]=!0,t.opsType===ae.Append){t.index=E.get();let r=h.slots.value;if(r.length>0){let e=r[r.length-1];e.active=!1,e.route&&(e.route.active=e.active)}let n=new ve(t,a,t.index,!0);h.slots.value=[...r,n];let s=d+1,i=1,o=new be(h,t.index,d);this[It](c,s,e,i,o)}else if(t.opsType===ae.Open){let r=h.slots.value,n=!1;for(let e of r){if(null!==e.route&&se.isSameForRouteModel(e.route,t)){if(1==e.active)return t.index=e.index,t.active=e.active,e.route=t,Promise.resolve();e.active=!0,n=!0,t.index=e.index,t.active=e.active,e.route=t,this[zt](e.route)}else e.active=!1;e.route&&(e.route.active=e.active)}if(!n){t.index=E.get();let n=new ve(t,a,t.index,!0);r.push(n);let s=d+1,i=1,o=new be(h,t.index,d);this[It](c,s,e,i,o)}h.slots.value=[...r]}else{let r=h.slots.value;if(0==r.length){t.index=E.get(),h.slots.value=[new ve(t,a,t.index)];let r=d+1,n=1,s=new be(h,t.index,d);this[It](c,r,e,n,s)}else{let n=r[0];if(n.model!==a){this[Dt](c,u,null,!0),t.index=E.get(),h.slots.value=[new ve(t,a,t.index)];let r=d+1,n=1,s=new be(h,t.index,d);this[It](c,r,e,n,s)}else{null!==n.route&&this[zt](n.route);let s=[];for(let e=1;e<r.length;e++)s.push(r[e].index);s.length>0&&this[Dt](c,u,s,!0),t.index=n.index,n.route=t;let i=[new be(h,t.index,d)],o=d+1,l=1,a=new be(h,t.index,d);for(;i.length>0&&o<c.layers.length&&l<e.layers.length;o++,l++){let t=[];for(let e=0;e<c.layers[o].views.length;e++){let r=c.layers[o].views[e];r[me]&&be.include(i,r[me])&&t.unshift(e)}let r=[];for(let n of t){let t,s=c.layers[o].views[n],i=e.layers[l].models;for(let e=0;e<i.length;e++)if(s.name===i[e].name){t=i[e];break}if(t){let i=s.slots.value;if(0==i.length){let r=0;s.slots.value=[new ve(null,t,r)];let n=o+1,i=l+1;this[It](c,n,e,i,a)}else{let u=i[0];if(u.model!==t){this[Dt](c,{x:n,y:o},null,!0),s.slots.value=[new ve(null,t,0)];let r=o+1,i=l+1;this[It](c,r,e,i,a)}else{s[de]&&null!==u.route&&this[zt](u.route);let e=[];for(let t=1;t<i.length;t++)e.push(i[t].index);e.length>0&&this[Dt](c,{x:n,y:o},e,!0),r.push(new be(s,u.index,o))}}s[de]=!1}else this[Dt](c,{x:n,y:o},null,!1)}i=r}this[It](c,o,e,l,a)}}}if(h&&h[ye]){let e=h[ye];e&&(t.slot=new re(p,d,null==e?void 0:e.view.name,null!=(l=null==e?void 0:e.index)?l:0))}r.to=void 0,t.session=r,this[Gt](t)}[It](e,t,r,n,s){let i=n,o=t;for(;o<e.layers.length&&i<r.layers.length;o++,i++){let t=e.layers[o].views;for(let e of r.layers[i].models){let r=new we(e.name,!1,s),n=new ve(null,e);r.slots.value=[n],t.push(r)}}for(;i<r.layers.length;i++){let t=new xe;t.views=[];for(let e of r.layers[i].models){let r=new we(e.name,!1,s),n=new ve(null,e);r.slots.value=[n],t.views.push(r)}e.layers.push(t)}}[Z](e,t,r,n,s,i){var o,l;if(t<0||t>this[er].layers.length)return null;if(t<this[er].layers.length){let a=this[er].layers[t],u=null;for(let h of a.views){let a=!1;if(null!==r?(a=h.name===e&&(null==(o=h[ye])?void 0:o.view)===r,-1!==n&&(a=(null==(l=h[ye])?void 0:l.index)===n)):a=h.name===e,a){null!==s&&(h[me]={view:s,index:i,level:t-1}),u=h;break}}if(null!==u)return u}let a=null,u=null;null!==s&&(a=s[de]?{view:s,index:i,level:t-1}:s[ye],u={view:s,index:i,level:t-1});let h=new we(e,!0,a);if(h[me]=u,t==this[er].layers.length){let e=new xe;e.views=[h],this[er].layers.push(e)}else this[er].layers[t].views.push(h);return h}}var br,xr,Sr;(Sr=xr||(xr={}))[Sr.limitless=0]="limitless",Sr[Sr.once=1]="once";const Rr=Symbol("registerKey");class Ar{constructor(e,t){this.callback=e,this.policy=t}}class Cr{constructor(){this[br]=new Map}on(e,t,r=!1){let n=this[Rr].get(e);n||(n=new Array,this[Rr].set(e,n));let s=new Ar(t,!0===r?1:0);return n.push(s),this}off(e,t){if(!t)return this[Rr].delete(e),this;let r=this[Rr].get(e);if(r)for(let e=0;e<r.length;e++){if(r[e].callback===t){r.slice(e,1);break}}return this}bind(e,t,r=!1){return this.on(e,t,r)}unbind(e,t){return this.off(e,t)}once(e,t){return this.on(e,t,!0)}all(...e){let t=e.length;if(t<1)return this;let r=e[t-1];if("function"!=typeof r)return console.error("callback can not benn empty"),this;let n=t-1,s=new Array(n),i=[].splice.call(e,0,n);for(let e=0;e<i.length;e++)this.once(i[e],(t=>{s[e]=t,n-=1,0==n&&Reflect.apply(r,{},s)}));return this}emit(e,...t){let r=this[Rr].get(e);if(!r)return this;for(let e=0;e<r.length;){let n=r[e];if(1==n.policy?r.slice(e,1):e++,"function"==typeof n.callback)try{T((()=>{Reflect.apply(n.callback,{},t)}))}catch(e){console.error(e.message,e)}}return this}trigger(e,...t){return Reflect.apply(this.emit,this,[e,...t])}}var Er,Pr,Tr;br=Rr,(Tr=Pr||(Pr={})).DEACTIVATED="da",Tr.ACTIVATED="a";class Or{constructor(e,t,r){this.target=r,this.hook=t,this.type=e}}const jr=Symbol("eventsKey");class $r{constructor(){this[Er]=[]}addHook(e,t,r){let n=new Or(e,t,r);return this[jr].push(n),!0}removeHook(e,t,r){let n=-1;for(let s=0;s<this[jr].length;s++){let i=this[jr][s];if(i.type===e&&i.hook===t&&i.target===r){n=s;break}}return-1!=n&&(this[jr].splice(n,1),!0)}callHook(e){for(let t=this[jr].length-1;t>=0;t--){let r=this[jr][t];if(r.type===e)try{Reflect.apply(r.hook,r.target,[])}catch(e){console.error(e.message,e)}}}}Er=jr;const Fr=Symbol("ilhc");function qr(e){return t=>{let i=r(),o=n(Fr,null);null!=o?(s((()=>{null==o||o.removeHook(e,t,i)})),o.addHook(e,t,i)):console.error("can not get lifecycle context")}}let _r=qr(Pr.ACTIVATED),kr=qr(Pr.DEACTIVATED);const Kr=Symbol("rk"),Nr=Symbol("crk"),Dr=Symbol("vd"),Mr=Symbol("rv"),Hr=Symbol("rvi"),Lr=Symbol("pv"),Ir=Symbol("pvi");function Br(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.showFromClass)?r:e.enterFromClass,n||(n=e.transitionName,n?t?`${n}-show-from`:`${n}-enter-from`:null)}function Ur(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.showActiveClass)?r:e.enterActiveClass,n||(n=e.transitionName,n?t?`${n}-show-active`:`${n}-enter-active`:null)}function Vr(e){var t,r,n,s;let i,o=e.duration;return"object"==typeof o?i={enter:null!=(t=o.enter)?t:-1,leave:null!=(r=o.leave)?r:-1,show:null!=(n=o.show)?n:-1,hide:null!=(s=o.hide)?s:-1}:("string"==typeof o&&(o=0==o.length?-1:Number(o)),i={enter:o,leave:o,show:o,hide:o}),i}function Wr(e,t){e.classList.contains(t)||e.classList.add(t)}function Jr(e,t){e.classList.remove(t)}const Gr=Ce&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout;function zr(e){Gr(e)}function Xr(e,t,...r){f(t)&&(null==e&&(e={}),Reflect.apply(t,e,r))}function Yr(e,t,r,n=-1,s,i,o,l){if(f(i)){if(void 0!==s&&s>=0)return void setTimeout((()=>{Reflect.apply(i,e,[t,r,n]),f(l)&&Reflect.apply(l,e,[])}),s);let o=["animationend","transitionend"],a=s=>{o.forEach((e=>{Oe(t,e,a)})),Reflect.apply(i,e,[t,r,n]),l&&Reflect.apply(l,e,[])};o.forEach((e=>{Te(t,e,a)}))}if(f(o)){let s="animationcancel",i=l=>{Reflect.apply(o,e,[t,r,n]),Oe(t,s,i)};Te(t,s,i)}}function Qr(e){return null!==e&&(e.opsType===ae.Append||e.opsType===ae.Open)}function Zr(e,t,r,n,s={},i,o=-1){if(t&&(r||Qr(i))){let e=Br(s,r);e&&Wr(n,e);let t=Ur(s,r);t&&Wr(n,t)}else{Xr(e,function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onBeforeShow)?r:e.onBeforeEnter,n}(s,r),[n,i,o])}}function en(e,t,r,n,s={},i,o,l,a){if(t&&(r||Qr(o))){let t=Br(s,r),u=Ur(s,r),h=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.showToClass)?r:e.enterToClass,n||(n=e.transitionName,n?t?`${n}-show-to`:`${n}-enter-to`:null)}(s,r);zr(h?()=>{Yr(e,n,o,l,i,(()=>{u&&Jr(n,u),h&&Jr(n,h),f(a)&&a(e,a,[n])})),t&&Jr(n,t),h&&Wr(n,h)}:()=>{t&&Jr(n,t),u&&Jr(n,u),f(a)&&a(e,a,[n])})}else{let t=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onShow)?r:e.onEnter,n}(s,r),i=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onAfterShow)?r:e.onAfterEnter,n}(s,r),u=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onShowCancelled)?r:e.onEnterCancelled,n}(s,r),h=t=>{!t&&f(i)?Xr(e,i,[n,o,l]):f(u)&&Xr(e,u,[n,o,l]),f(a)&&a(e,a,[n])};f(t)?Xr(e,t,[n,h,o,l]):h()}}function tn(e,t,r,n,s={},i,o,l,a,u){if(t&&(r||Qr(l))){let t=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.hideFromClass)?r:e.leaveFromClass,n||(n=e.transitionName,n?t?`${n}-hide-from`:`${n}-leave-from`:null)}(s,r),h=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.hideActiveClass)?r:e.leaveActiveClass,n||(n=e.transitionName,n?t?`${n}-hide-active`:`${n}-leave-active`:null)}(s,r),c=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.hideToClass)?r:e.leaveToClass,n||(n=e.transitionName,n?t?`${n}-hide-to`:`${n}-leave-to`:null)}(s,r);t&&Wr(n,t),h&&Wr(n,h),zr(c?()=>{Yr(e,n,l,a,i,(()=>{h&&Jr(n,h),c&&Jr(n,c),f(u)&&Xr(e,u,[n]),!r&&f(o)&&o()})),t&&Jr(n,t),c&&Wr(n,c)}:()=>{t&&Jr(n,t),h&&Jr(n,h),f(u)&&Xr(e,u,[n]),!r&&f(o)&&o()})}else{let t=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onHide)?r:e.onLeave,n}(s,r),i=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onAfterHide)?r:e.onAfterLeave,n}(s,r),h=function(e,t=!1){var r;let n=null;return n=t&&null!=(r=e.onHideCancelled)?r:e.onLeaveCancelled,n}(s,r),c=t=>{!t&&f(i)?(Xr(e,i,[n,l,a]),f(u)&&Xr(e,u,[n]),!r&&f(o)&&o()):f(h)&&(Xr(e,h,[n,l,a]),f(u)&&Xr(e,u,[n]))};f(t)?Xr(e,t,[n,c,l,a]):c()}}function rn(e,t={},r,n=-1){var s;let i=O(t.css),o=null!=(s=t.mode)?s:"default",l=Vr(t);return{mode:o,persisted:!1,beforeEnter:s=>{Zr(e,i,!1,s,t,r,n)},enter:s=>{en(e,i,!1,s,t,l.enter,r,n)},leave:(s,o)=>{tn(e,i,!1,s,t,l.leave,o,r,n)},clone:s=>rn(e,t,r,n)}}function nn(e){return e.el}function sn(e,t,r={},n,s,i,o){let l=nn(t);if(null!=l)if(i){let t=O(r.css),i=Vr(r);Zr(e,t,!0,l,r,n,s),en(e,t,!0,l,r,i.show,n,s,(t=>{f(o)&&Xr(e,o,[t])}))}else f(o)&&Xr(e,o,[l])}function on(e,t,r={},n,s,i,o){let l=nn(t);if(null!=l)if(i){let t=O(r.css),i=Vr(r);tn(e,t,!0,l,r,i.hide,null,n,s,(t=>{f(o)&&Xr(e,o,[t])}))}else f(o)&&Xr(e,o,[l])}function ln(e,t,r){return"function"==typeof e?Reflect.apply(e,{},[t,r]):e}const an=Symbol("lifecycleHooksContextKey");function un(e){if(Array.isArray(e.children)&&e.children.length>0){let t=e.children[0];if(null!=t&&null!=t.component)return t.component[an]}return null}class hn{constructor(e,t){this.node=e,this.state=t}}let cn=i({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,required:!1,default:"default"},modelSlot:{type:[Object],required:!1},multi:{type:Boolean,required:!1,default:!1},tag:{type:[String,Object,Function],required:!1,default:"div"},viewTag:{type:[String,Object,Function],required:!1,default:"div"},viewTagProps:{type:[Object,Function],required:!1,default:()=>({})},viewClass:{type:[String,Function],required:!1},viewActiveClass:{type:[String,Function],required:!1},viewDeactiveClass:{type:[String,Function],required:!1},css:{type:[Boolean,String],required:!1,default:!0},transition:{type:[Boolean,String],required:!1,default:!1},transitionName:{type:String,required:!1},enterFromClass:{type:String,required:!1},enterActiveClass:{type:String,required:!1},enterToClass:{type:String,required:!1},leaveFromClass:{type:String,required:!1},leaveActiveClass:{type:String,required:!1},leaveToClass:{type:String,required:!1},showFromClass:{type:String,required:!1},showActiveClass:{type:String,required:!1},showToClass:{type:String,required:!1},hideFromClass:{type:String,required:!1},hideActiveClass:{type:String,required:!1},hideToClass:{type:String,required:!1},onBeforeEnter:{type:Function,required:!1},onEnter:{type:Function,required:!1},onAfterEnter:{type:Function,required:!1},onEnterCancelled:{type:Function,required:!1},onBeforeLeave:{type:Function,required:!1},onLeave:{type:Function,required:!1},onAfterLeave:{type:Function,required:!1},onLeaveCancelled:{type:Function,required:!1},onBeforeShow:{type:Function,required:!1},onShow:{type:Function,required:!1},onAfterShow:{type:Function,required:!1},onShowCancelled:{type:Function,required:!1},onBeforeHide:{type:Function,required:!1},onHide:{type:Function,required:!1},onAfterHide:{type:Function,required:!1},onHideCancelled:{type:Function,required:!1}},setup(e,t){var i,a;let u=r();const h=!0===e.multi,c=n(Kr,null),f=n(Dr,0),p=n(Mr,null),d=n(Hr,-1);let y=!1,m=null;const g=e.modelSlot;if(g){o(Dr,f+1),o(Hr,g.index),o(Ir,g.index);let e=g.route;if(e&&o(Nr,e),null!==u){let e=u,t=new $r;e[an]=t,o(Fr,t)}}else{if(null==c)return void console.error("router is not been injected");let t=e.name,r=n(Lr,null),s=n(Ir,0);if(m=c[Z](t,f,p,d,r,s),null===m)return;o(Lr,m);!0===m[de]&&o(Mr,m),h?y=O(null==(a=e.transition)||a):(y=O(null!=(i=e.transition)&&i),o(Hr,-1),o(Dr,f+1),o(Ir,-1))}let v=new Map;return s((()=>{v&&v.clear()})),()=>{if(h){let r=new Map,n=[],s=null==m?void 0:m.slots.value,i=[];for(let t=0;t<s.length;t++){let o=s[t],a=`${e.name}-${o.index}`,h=l(cn,{modelSlot:o}),c={},f=ln(e.viewClass,o.route,t);"string"==typeof f&&f.length>0&&(c[f]=!0);let p=ln(e.viewActiveClass,o.route,t),d=ln(e.viewDeactiveClass,o.route,t),m=v.get(a);if("string"==typeof p&&p.length>0&&(c[p]=o.active),"string"==typeof d&&d.length>0&&(c[d]=!o.active),m&&o.active!==m.state){let r=m.node;o.active?i.unshift((()=>{sn(u,r,e,o.route,t,y,(()=>{let e=un(r);null!=e&&e.callHook(Pr.ACTIVATED)}))})):i.push((()=>{on(u,r,e,o.route,t,y,(()=>{let e=un(r);null!=e&&e.callHook(Pr.DEACTIVATED)}))}))}let g={class:c,key:a},w=ln(e.viewTagProps,o.route,t);null!==w&&"object"==typeof w&&R(!0,g,w);let b=ln(e.viewTag,o.route,t),x=l(b,g,{default:()=>[h]});if(r.set(a,new hn(x,o.active)),y){let r=rn(u,e,o.route,t);x.transition=r}n.push(x)}v=r,function(e,t={}){zr((()=>{for(let r=0;r<e.length;r++)Reflect.apply(e[r],t,[])}))}(i,u);let o=ln(e.tag,null,-1),a={};return Object.assign(a,t.attrs),l(o,a,{default:()=>n})}if(null!=g){let e={};return l(g.model.component,e)}{let t=m.slots.value;if(t.length>0){let r=t[0],n={},s=l(r.model.component,n);if(y){let t=rn(u,e,r.route,-1);s.transition=t}return s}}}}});function fn(e,t){return"function"==typeof e?Reflect.apply(e,{},[t]):e}let pn=i({name:"RouterLink",inheritAttrs:!1,props:{tag:{type:[String,Object,Function],required:!1,default:"a"},to:{type:[String,Object,Function],required:!0},activeClass:{type:[String,Function],required:!1,default:"fox-router-link-active"},exact:{type:[String,Boolean,Function],required:!1},exactActiveClass:{type:[String,Function],required:!1,default:"fox-router-link-exact-active"},event:{type:[String,Function],required:!1,default:"onClick"}},setup(e,t){const r=n(Kr,null);return()=>{let n=fn(e.to,null),s=fn(e.tag,n);if(null==s)return void console.warn("can not resolve link tag");let i=null,o=null;null!==r&&(i=r[ee](n),o=r.current);let a={},u=fn(e.activeClass,i);if("string"==typeof u&&u.length>0&&(a[u]=function(e,t){return!!(null!=e&&null!=t&&(e.path&&t.path&&t.path.startsWith(e.path)||e.name&&e.name==t.name))}(i,o)),!0===fn(e.exact,i)){let t=fn(e.exactActiveClass,i);"string"==typeof t&&t.length>0&&(a[t]=function(e,t){return!!(null!=e&&null!=t&&(e===t||e.path&&e.path===t.path||e.name&&e.name===t.name))}(i,o))}let h={class:a};R(!0,h,t.attrs);let c=fn(e.event,i);if("string"==typeof c){const e=e=>{null!=r?null!=i?function(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||null!=e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}(e)&&r.to(i):console.warn("route is not been resolved"):console.warn("router is not been injectd")};h[c]=e}return l(s,h,t.slots)}}});const dn=Symbol("fk");function yn(e={}){const t=new wr(e),r=new V,n=new Cr,s={get router(){return t},get bus(){return r},get eventProxy(){return n},get require(){return t.require},get ajax(){return Fe},get extend(){return R},get clone(){return A},install(e){e.provide(Kr,t),e.provide(dn,s),e.component("fox-router-view",cn),e.component("fox-router-link",pn),Reflect.defineProperty(e.config.globalProperties,"$fox",{get:()=>s}),Reflect.defineProperty(e.config.globalProperties,"$router",{get:()=>t}),Reflect.defineProperty(e.config.globalProperties,"$route",{get:()=>gn()}),e.config.globalProperties.$fox_on=function(e,t,r=!1){n.on(e,t,r)},e.config.globalProperties.$fox_off=function(e,t){n.off(e,t)},e.config.globalProperties.$fox_once=function(e,t){n.once(e,t)},e.config.globalProperties.$fox_all=function(...e){let t=n;Reflect.apply(t.all,t,e)},e.config.globalProperties.$fox_trigger=function(e,...t){let r=n;Reflect.apply(r.trigger,r,[e,...t])},e.config.globalProperties.$fox_emit=function(e,...t){let r=n;Reflect.apply(r.trigger,r,[e,...t])},e.mixin({mounted(){t.init()}})}};return s}function mn(){return n(Kr)}function gn(){if(-1==n(Ir,0)){let e=n(Lr,null);if(null==e)return null;if(!e[de]){let t=e[ye];if(null==t)return null;e=t.view}let t=e.slots.value;return 0==t.length?null:t[0].route}return n(Nr,null)}function vn(){return n(dn,null)}export{V as Bus,st as EventChain,Cr as EventProxy,se as Route,wr as Router,A as clone,yn as createFox,R as extend,a as isArray,c as isDate,x as isESModule,f as isFunction,u as isMap,y as isObject,w as isPlainObject,m as isPromise,h as isSet,p as isString,d as isSymbol,_r as onFoxActivated,kr as onFoxDeactivated,v as toTypeString,vn as useFox,gn as useRoute,mn as useRouter};
